record:
  properties:
    metadata:
      properties:
        title:
          type: fulltext
        status:
          type: keyword
  module:
    qualified: thesis
  permissions:
    presets: ['community']

  use:
    - invenio
  requests:
    types:
      secondary-community-submission:
        base-classes:
          - SecondaryCommunitySubmissionRequestType
        imports:
          - import: oarepo_communities.requests.submission_secondary.SecondaryCommunitySubmissionRequestType
      community-migration:
        base-classes:
          - CommunityMigrationRequestType
        imports:
          - import: oarepo_communities.requests.migration.CommunityMigrationRequestType
      delete-record:
        base-classes:
          - CommunityDeleteRecordRequestType
        imports:
          - import: oarepo_communities.requests.community_delete.CommunityDeleteRecordRequestType
      remove_secondary_community:
        base-classes:
          - RemoveSecondaryRequestType
        imports:
          - import: oarepo_communities.requests.remove_secondary.RemoveSecondaryRequestType

  draft:
    requests:
      types:
        secondary-community-submission:
          base-classes:
            - SecondaryCommunitySubmissionRequestType
          imports:
            - import: oarepo_communities.requests.submission_secondary.SecondaryCommunitySubmissionRequestType
        community-migration:
          base-classes:
            - CommunityMigrationRequestType
          imports:
            - import: oarepo_communities.requests.migration.CommunityMigrationRequestType
        publish-draft:
          base-classes:
            - CommunityPublishDraftRequestType
          imports:
            - import: oarepo_communities.requests.community_publish.CommunityPublishDraftRequestType
        remove_secondary_community:
          base-classes:
            - RemoveSecondaryRequestType
          imports:
            - import: oarepo_communities.requests.remove_secondary.RemoveSecondaryRequestType

  record-communities:
    permissions:
      presets: [ "community"]

  community-records:
    permissions:
      presets: [ "community", "community-records-community" ]
    service-config:
      extra-code: |-2
            draft_cls = {{thesis.records.api.ThesisDraft}}

  service-config:
    extra-code: |-2
          service_community_records = {{thesis.proxies.current_community_records_service}}
          service_record_communities = {{thesis.proxies.current_record_communities_service}}
      



profiles:
  - record
  - draft
  - record_communities
  - community_records


settings:
  schema-server: 'local://'
