record:
  properties:
    metadata:
      properties:
        title:
          type: fulltext
        status:
          type: keyword
  module:
    qualified: thesis

  use:
    - invenio

  permissions:
    presets: [ 'workflow' ]

  record:
    fields:
      state: "{{oarepo_workflows.records.systemfields.state.RecordStateField}}(initial='published')"

  draft:
    record:
      fields:
        state: "{{oarepo_workflows.records.systemfields.state.RecordStateField}}()"

  draft-parent-record:
    fields:
      workflow: "{{oarepo_workflows.records.systemfields.workflow.WorkflowField}}()"

  draft-parent-record-metadata:
    base-classes:
      - oarepo_workflows.records.models.RecordWorkflowParentModelMixin
      - invenio_db.db{db.Model}
      - invenio_records.models.RecordMetadataBase

  record-communities:
    permissions:
      presets: [ "workflow"]


profiles:
  - record
  - draft
  - record_communities


settings:
  schema-server: 'local://'
